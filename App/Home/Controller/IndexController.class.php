<?phpnamespace Home\Controller;class IndexController extends CommonController {    //PC 首页    public function index(){        $Tool = A('Tool');        $map['status'] = 2;        $order = 'sold_num desc';        $data = $Tool->getGoods($map,4,$order);        $this->assign('hots',$data);        $goodsType = json_decode(readConf('goodsType'),true);        foreach($goodsType as $k=>$v){            $map['cid'] = $k;            $data = $Tool->getGoods($map,8,$order);            $lists[] = array('title'=>$v,'data'=>$data,'type'=>$k);        }        $this->assign('lists',$lists);        //获取新闻列表        $news = M('Help')->field('id,cid,title,time')->order('id desc')->limit(5)->select();        $this->assign('news',$news); 		$slides = readConf('carouselJson');        $this->assign('slides',json_decode($slides,true));        $this->display('index');    }    //新闻列表    public function newsList(){        $map = array();        $cid = I('get.cid');        if($cid){            $map['cid'] = $cid;        }        $this->assign('cid',$cid);        $count = M('help')->where($map)->count();        $Page = new \Think\Page($count);        $show = $Page->show();        //获取新闻列表        $news = M('Help')->where($map)->field('id,cid,title,time')->order('id desc')->limit($Page->firstRow,$Page->listRows)->select();        $this->assign('list',$news);        $this->assign('page',$show);        $this->display('newsList');    }    //新闻详情页面    public function news(){        $id = I('get.id');        $info = M('help')->find($id);        $this->assign('info',$info);        $this->display('news');    }    //购物车    public function cart(){        layout(false);        $cart = session('cart');        $gidArr = array(0);        foreach($cart as $k=>$v){            $gidArr[] = $k;        }        $gInfo = M('goods')->where(array('gid'=>array('in',$gidArr)))->getField('gid,name,buy_price as price,status,left_num,img',true);        $data = array();        foreach($cart as $k=>$v){            if(array_key_exists($k,$gInfo)){                $i['gid'] = $k;                $i['num'] = $v;                $i['name'] = $gInfo[$k]['name'];                $i['price'] = $gInfo[$k]['price'];                $i['status'] = $gInfo[$k]['status'];                $i['left_num'] = $gInfo[$k]['left_num'];                $i['img'] = $gInfo[$k]['img'];                $data[] = $i;            }        }        $this->assign('data',$data);        $this->display('cart');    }    public function setOpenid(){        session('openid','asdlfkjal');    }}